n,h=map(int,input().split())
loct=list(map(int,input().split()))
next=list(map(int,input().split()))
n=h
while n !=0:
    print(loct[n-1])
    n=next[n-1]
print("End")
